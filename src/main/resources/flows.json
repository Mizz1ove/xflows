[
    {
        "id" : "mqttIn",
        "nodeType" : "MqttIn",
        "topic" : "application/#",
        "qos" : 1,
        "client" : "ems",
        "wires" : [
            ["filterNode"]
        ]
    },
    {
        "id" : "filterNode",
        "nodeType" : "FilterNode",
        "targetStrings" : ["devEui", "object"],
        "wires" : [
            ["splitNode"]
        ]
    },
    {
        "id" : "splitNode",
        "nodeType" : "SplitNode",
        "splitKey" : "object",
        "keyHolder" : "sensorType",
        "wires" : [
            ["mqttMapper"]
        ]
    },
    {
        "id" : "mqttMapper",
        "nodeType" : "MqttMapper",
        "wires" : [
            ["engine"]
        ]
    },
    {
        "id" : "modbusServer",
        "nodeType" : "ModbusServer",
        "wires" : []
    },
    {
        "id" : "engine",
        "nodeType" : "RuleEngine",
        "wires" : [
            ["modbusServer"],
            ["generateTopic"]
        ]
    },
    {
        "id" : "generateTopic",
        "nodeType" : "GenerateTopicNode",
        "topicPattern" : "data/d/+/b/+/p/+/e/+",
        "field" : ["devEui", "branch", "place", "sensorType"],
        "wires" : [
            ["mqttOut"]
        ]
    },
    {
        "id" : "mqttOut",
        "nodeType" : "MqttOutNode",
        "qos" : 1,
        "client" : "localhost",
        "wires" : []
    },
    {
        "id" : "modbusReadNode",
        "nodeType" : "ModBusReadNode",
        "client" : "node-red1",
        "address" : 0,
        "wires" : [
            ["modbusMapper"]
        ]
    },
    {
        "id" : "modbusMapper",
        "nodeType" : "ModbusMapper",
        "wires" : [
            ["engine"]
        ]
    }

]